#!/usr/bin/env rundklet

add_note <<~Note
  try docker network
  https://docs.docker.com/network/bridge/
Note

register_docker_image "busybox:1.29"
register_net 'dknet-try'

task :main do
  invoke :netup, [], {}
  cname = 'dknet-try1'
  system <<~Desc
    docker run -d --name #{cname} --net=#{netname} #{docker_image} ping localhost
    docker run -it --rm --net=#{netname} #{docker_image} ping -c2 #{cname}
  Desc
end

task :clean do
  invoke :netdown, [], {}
end

