#!/usr/bin/env rundklet

add_note <<~Note
  try docker network
Note

register_docker_image "busybox:1.29"
register :netname, "dknet-try"

task :main do
  system <<~Desc
    docker network create --driver bridge #{fetch(:netname)}
    docker run -d --name dknet-try1 --net=#{fetch(:netname)} #{docker_image} ping localhost
    docker run -it --rm --name dkent-try2 --net=#{fetch(:netname)} #{docker_image} ping -c3 dknet-try1
  Desc
end

task :clean do
  system <<~Desc
    docker network rm #{fetch(:netname)}
  Desc
end

let_cli_magic_start! # make dockerize fun with ruby 
